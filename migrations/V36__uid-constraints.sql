DELETE FROM `unique_id_users` where user_id not in 
   (SELECT id FROM login);

ALTER TABLE `unique_id_users` 
ADD COLUMN `create_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
ADD COLUMN `update_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
ADD CONSTRAINT `FK_user_hash_to_uid` 
    FOREIGN KEY (uniqueid_hash)
    REFERENCES uniqueid(hash),
ADD CONSTRAINT `FK_unique_id_users_user_id_to_login` 
    FOREIGN KEY (user_id)
    REFERENCES login(id);

ALTER TABLE `uniqueid` 
ADD COLUMN `create_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
ADD COLUMN `update_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;

DELETE FROM `uniqueid_exempt` WHERE user_id not in (SELECT id from login);
ALTER TABLE `uniqueid_exempt` 
ADD COLUMN `create_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
ADD COLUMN `update_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
ADD CONSTRAINT `FK_uniqueid_exempt_user_id_to_login` 
    FOREIGN KEY (user_id)
    REFERENCES login(id);
